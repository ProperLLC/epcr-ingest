ePCR JSON Formats:

ePCR document:

{
	"ObjectId" : 1234, // internal mongo id - are random and suitable for what we need; could override this if we want
	"formId" : 65432,
	"departmentCode" : "BH",
	"hospitalCode" : "XY", // I'm guessing this could also be in the formData - would be best to pull this up to the top since all forms are likely to have this
	"deviceSequenceId" : 1234,
	"readyForArchive" : false,
	"formData" : {
		// form data goes here, validated against JSON schema
	},
	"statusHistory" : [
		{ 
			"dateTime" : "2013-01-01T01:01:01-0700",
			"status" : "SUBMITTED" // SUBMITTED | PENDING | ARCHIVED
		},
		{ 
			"dateTime" : "2013-01-01T01:01:01-0700",
			"status" : "PENDING"
		}
	],
	"audit" : {
		"user" : "JSIXPACK",
		"dateCreated" : "2013-01-01T01:01:01-0700",
		"dateUpdated" : "2013-01-01T02:01:01-0700"
	}

}

form-metadata : 
{
	"formId" : 65432, // will use this over ObjectID since its unique
	"version" : 1.0,
	"schema" : "form65432-schema.json",
	"departmentCode" : "BH",
	"audit" : {
		"user" : "JSIXPACK",
		"dateCreated" : "2013-01-01T01:01:01-0700",
		"dateUpdated" : "2013-01-01T02:01:01-0700",
		"description" : "intiial version of form 65432"
	}
}



organization : 
// either a transport provider or a hospital
{
	"ObjectId" : 1234,
	"departmentCode" : "BH",
	"name" : "Beverly Hills",
	"contacts" : [
		{
			"types" : ["billing", "technical", "decisionMaker"],
			"firstName" : "John",
			"lastName" : "Doe",
			"email" : "jdoe@bh.com",
			"primaryPhone" : "555-867-5309",
			"secondaryPhone" : "566-867-5309"
		} 
	],
	// Not sure yet on these, but store the actual filters for an org with an org; start with simple
	"filters" : [
		{
			"name" : "BH Filter",
			"filterBy" : "departmentCode",
			"value" : "BH",
			"default" : true
		},
		{
			"name" : "XY Hospital Code",
			"filterBy" : "hospitalCode",
			"value" : "XY",
			"default" : false
		}
	]
	// TODO - perhaps more to add here?  address, etc

}

user : 
{
	"name" : "name of the credentials",
	"username" : "JSIXPACK", // should be the actual unique id
	"password" : "some MD5 encrypted string",
	"apiKey" : "some unreadable SHA-1 key",
}

sessionHistory : 
{
	"username" : "JSIXPACK",
	"ipAddress" : "10.0.0.1", 
	"successful" : true,
	"action" : "LOGIN",
	"dateTime" : "2013-01-01T01:01:01-0700"
}

// TODO - sample JSON schema based on XML samples

